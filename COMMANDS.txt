# Command lines for building Han Peace Serif OTFs & OTCs
#
# Version 2017-04-03
#
# To subroutinize the 'CFF ' table, which may take several hours or up
# to a day for the 65,535-glyph fonts, replace the "-nS" command-line
# option with "-maxs 25000" in the "makeotf" command lines.

### Command lines for building the region-specific subset OTFs
### Executed in {ExtraLight,Light,Regular,Medium,SemiBold,Bold,Heavy}

# Simplified Chinese

makeotf -f cidfont.ps.CN -omitMacNames -ff features.CN -fi cidfontinfo.CN -mf ../FontMenuNameDB.SUBSET -r -nS -cs 25 -ch ../UniHanPeaceSerifCN-UTF32-H -ci ../HanPeaceSerif_CN_sequences.txt

# Traditional Chinese (TW)

makeotf -f cidfont.ps.TW -omitMacNames -ff features.TW -fi cidfontinfo.TW -mf ../FontMenuNameDB.SUBSET -r -nS -cs 2 -ch ../UniHanPeaceSerifTW-UTF32-H -ci ../HanPeaceSerif_TW_sequences.txt

# Japanese

makeotf -f cidfont.ps.JP -omitMacNames -ff features.JP -fi cidfontinfo.JP -mf ../FontMenuNameDB.SUBSET -r -nS -cs 1 -ch ../UniHanPeaceSerifJP-UTF32-H -ci ../HanPeaceSerif_JP_sequences.txt

# Korean

makeotf -f cidfont.ps.KR -omitMacNames -ff features.KR -fi cidfontinfo.KR -mf ../FontMenuNameDB.SUBSET -r -nS -cs 3 -ch ../UniHanPeaceSerifKR-UTF32-H -ci ../HanPeaceSerif_KR_sequences.txt

### Command lines for building the language-specific OTFs
### Executed in {ExtraLight,Light,Regular,Medium,SemiBold,Bold,Heavy}/OTC

# Simplified Chinese

makeotf -f cidfont.ps.OTC.SC -omitMacNames -ff features.OTC.SC -fi cidfontinfo.OTC.SC -mf ../../FontMenuNameDB -r -nS -cs 25 -ch ../../UniHanPeaceSerifCN-UTF32-H -ci ../../HanPeaceSerif_CN_sequences.txt

# Traditional Chinese (TW)

makeotf -f cidfont.ps.OTC.TC -omitMacNames -ff features.OTC.TC -fi cidfontinfo.OTC.TC -mf ../../FontMenuNameDB -r -nS -cs 2 -ch ../../UniHanPeaceSerifTW-UTF32-H -ci ../../HanPeaceSerif_TW_sequences.txt

# Japanese

makeotf -f cidfont.ps.OTC.J -omitMacNames -ff features.OTC.J -fi cidfontinfo.OTC.J -mf ../../FontMenuNameDB -r -nS -cs 1 -ch ../../UniHanPeaceSerifJP-UTF32-H -ci ../../HanPeaceSerif_JP_sequences.txt

# Korean

makeotf -f cidfont.ps.OTC.K -omitMacNames -ff features.OTC.K -fi cidfontinfo.OTC.K -mf ../../FontMenuNameDB -r -nS -cs 3 -ch ../../UniHanPeaceSerifKR-UTF32-H -ci ../../HanPeaceSerif_KR_sequences.txt

### Command line for building the OTCs (replace $dir with the face name)
### Executed in {ExtraLight,Light,Regular,Medium,SemiBold,Bold,Heavy}/OTC

otf2otc -t 'CFF '=0 -o HanPeaceSerif-$dir.ttc HanPeaceSerif-$dir.otf HanPeaceSerifK-$dir.otf HanPeaceSerifSC-$dir.otf HanPeaceSerifTC-$dir.otf

### Command lines for building the Super OTC

# Command lines for copying the CFF from the Japanese OTF to temporary
# (tmp) copies of the Simplified Chinese, Traditional Chinese, and
# Korean OTFs (replace $dir with the face name)
# Executed in {ExtraLight,Light,Regular,Medium,SemiBold,Bold,Heavy}/OTC

sfntedit -x CFF=CFF.J HanPeaceSerif-$dir.otf
cp HanPeaceSerif-$dir.otf HanPeaceSerif-$dir.otf.tmp
cp HanPeaceSerifK-$dir.otf HanPeaceSerifK-$dir.otf.tmp
cp HanPeaceSerifSC-$dir.otf HanPeaceSerifSC-$dir.otf.tmp
cp HanPeaceSerifTC-$dir.otf HanPeaceSerifTC-$dir.otf.tmp
sfntedit -a CFF=CFF.J HanPeaceSerifK-$dir.otf.tmp
sfntedit -a CFF=CFF.J HanPeaceSerifSC-$dir.otf.tmp
sfntedit -a CFF=CFF.J HanPeaceSerifTC-$dir.otf.tmp
sfntedit -d DSIG HanPeaceSerif-$dir.otf.tmp
sfntedit -d DSIG HanPeaceSerifK-$dir.otf.tmp
sfntedit -d DSIG HanPeaceSerifSC-$dir.otf.tmp
sfntedit -d DSIG HanPeaceSerifTC-$dir.otf.tmp

# Command line for building the Super OTC
# Executed in the root directory

otf2otc -o HanPeaceSerif.ttc ExtraLight/OTC/HanPeaceSerif-ExtraLight.otf.tmp ExtraLight/OTC/HanPeaceSerifK-ExtraLight.otf.tmp ExtraLight/OTC/HanPeaceSerifSC-ExtraLight.otf.tmp ExtraLight/OTC/HanPeaceSerifTC-ExtraLight.otf.tmp Light/OTC/HanPeaceSerif-Light.otf.tmp Light/OTC/HanPeaceSerifK-Light.otf.tmp Light/OTC/HanPeaceSerifSC-Light.otf.tmp Light/OTC/HanPeaceSerifTC-Light.otf.tmp Regular/OTC/HanPeaceSerif-Regular.otf.tmp Regular/OTC/HanPeaceSerifK-Regular.otf.tmp Regular/OTC/HanPeaceSerifSC-Regular.otf.tmp Regular/OTC/HanPeaceSerifTC-Regular.otf.tmp Medium/OTC/HanPeaceSerif-Medium.otf.tmp Medium/OTC/HanPeaceSerifK-Medium.otf.tmp Medium/OTC/HanPeaceSerifSC-Medium.otf.tmp Medium/OTC/HanPeaceSerifTC-Medium.otf.tmp SemiBold/OTC/HanPeaceSerif-SemiBold.otf.tmp SemiBold/OTC/HanPeaceSerifK-SemiBold.otf.tmp SemiBold/OTC/HanPeaceSerifSC-SemiBold.otf.tmp SemiBold/OTC/HanPeaceSerifTC-SemiBold.otf.tmp Bold/OTC/HanPeaceSerif-Bold.otf.tmp Bold/OTC/HanPeaceSerifK-Bold.otf.tmp Bold/OTC/HanPeaceSerifSC-Bold.otf.tmp Bold/OTC/HanPeaceSerifTC-Bold.otf.tmp Heavy/OTC/HanPeaceSerif-Heavy.otf.tmp Heavy/OTC/HanPeaceSerifK-Heavy.otf.tmp Heavy/OTC/HanPeaceSerifSC-Heavy.otf.tmp Heavy/OTC/HanPeaceSerifTC-Heavy.otf.tmp

# EOF
